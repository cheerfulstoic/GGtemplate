= Telco Network Management Using Graph Database

== Introduction

=== The Problem

Telecommunication companies need a way to predict and warn customers in advance of any service interruptions in order to maintain customer service agreements and avoid financial penalties of unplanned downtime.

=== The Challenge

Among the challenges were: sourcing and transforming data from more than 30 systems into a single system that had to hold the up-to-date topology for the entire network, and being able to query that system efficiently, answering questions like: if a device needs to be taken down for maintenance, who might be impacted, and what alternate routes might be used to mitigate the impact.

== The Network

[ image of telco network from Neo4j presentation/whitepaper ]

//set up graphgist with a graph that looks very similar to this but with nicer subgraph for demonstration of a semi-realistic SRLG issue, which will be described below

//hide
//setup
[source,cypher]
----
//create the crew nodes
CREATE (`1`:crew {crew_id:1, name:'Abeer Fathy'}), (`2`:crew {crew_id:2, name:'An Yu-bao'}), (`3`:crew {crew_id:3, name:'Anastasiya Vasilyev'}), (`4`:crew {crew_id:4, name:'Anna Zaytesev'}), (`5`:crew {crew_id:5, name:'Asley Leger'}), (`6`:crew {crew_id:6, name:'Aziza Hsuang-tsung'}), (`7`:crew {crew_id:7, name:'Bai Vasilyev'}), (`8`:crew {crew_id:8, name:'Barbra Schon'}), (`9`:crew {crew_id:9, name:'Bart Kosana'}), (`10`:crew {crew_id:10, name:'Bill Hinzman'}), (`11`:crew {crew_id:11, name:'Bill Cardille'}), (`12`:crew {crew_id:12, name:'Bobba Fett'}), (`13`:crew {crew_id:13, name:'Cai Shen'}), (`14`:crew {crew_id:14, name:'Cammy Schott'}), (`15`:crew {crew_id:15, name:'Cammy Vinogradov'}), (`16`:crew {crew_id:16, name:'Cammy Sokolov'}), (`17`:crew {crew_id:17, name:'Chan Morozov'}), (`18`:crew {crew_id:18, name:'Chan Bang'}), (`19`:crew {crew_id:19, name:'Charles Craig'}), (`20`:crew {crew_id:20, name:'Chew Kwan-yew'}), (`21`:crew {crew_id:21, name:'Chiang Popov'}), (`22`:crew {crew_id:22, name:'Chiu Xiao-yong'}), (`23`:crew {crew_id:23, name:'Dai Lu-fang'}), (`24`:crew {crew_id:24, name:'Dariya Solovynov'}), (`25`:crew {crew_id:25, name:'Dariya Semyonov'}), (`26`:crew {crew_id:26, name:'Dariya Vorobyrov'}), (`27`:crew {crew_id:27, name:'David Cardille'}), (`28`:crew {crew_id:28, name:'Deeanna Lacroix'}), (`29`:crew {crew_id:29, name:'Deng Szeto'}), (`30`:crew {crew_id:30, name:'Dina Schott'}), (`31`:crew {crew_id:31, name:'Dina Sokolov'}), (`32`:crew {crew_id:32, name:'Dina Vinogradov'}), (`33`:crew {crew_id:33, name:'Duane Jones'}), (`34`:crew {crew_id:34, name:'Duane Kuznetsov'}), (`35`:crew {crew_id:35, name:'Efra Man'}), (`36`:crew {crew_id:36, name:'Efra Chih-tui'}), (`37`:crew {crew_id:37, name:'Elena Morozov'}), (`38`:crew {crew_id:38, name:'Elwood Mead'}), (`39`:crew {crew_id:39, name:'Esmeralda Duggan'}), (`40`:crew {crew_id:40, name:'Fathia Xiao-yong'}), (`41`:crew {crew_id:41, name:'Fernanda Bassett'}), (`42`:crew {crew_id:42, name:'Fernanda Bang'}), (`43`:crew {crew_id:43, name:'Fong Chih'}), (`44`:crew {crew_id:44, name:'Francie Koonce'}), (`45`:crew {crew_id:45, name:'Francisco Read'}), (`46`:crew {crew_id:46, name:'Gearldine Mead'}), (`47`:crew {crew_id:47, name:'George Kosana'}), (`48`:crew {crew_id:48, name:'Halima Yu-bao'}), (`49`:crew {crew_id:49, name:'Hind Iamam'}), (`50`:crew {crew_id:50, name:'Hind Chih'}), (`51`:crew {crew_id:51, name:'Hind Kang'}), (`52`:crew {crew_id:52, name:'Hsi Kozlov'}), (`53`:crew {crew_id:53, name:'Hsi Shen'}), (`54`:crew {crew_id:54, name:'Hsi Jin-guo'}), (`55`:crew {crew_id:55, name:'Hsieh Xing-li'}), (`56`:crew {crew_id:56, name:'Hsieh Xun'}), (`57`:crew {crew_id:57, name:'Hua Hen-to'}), (`58`:crew {crew_id:58, name:'Huda Kuznetsov'}), (`59`:crew {crew_id:59, name:'Huda Szeto'}), (`60`:crew {crew_id:60, name:'Huda Qian-fu'}), (`61`:crew {crew_id:61, name:'Huda Jones'}), (`62`:crew {crew_id:62, name:'Huda ODea'}), (`63`:crew {crew_id:63, name:'Huda Ridley'}), (`64`:crew {crew_id:64, name:'Hui Kang'}), (`65`:crew {crew_id:65, name:'Inna Pavlov'}), (`66`:crew {crew_id:66, name:'Inna Vinogradov'}), (`67`:crew {crew_id:67, name:'Inna Smirnov'}), (`68`:crew {crew_id:68, name:'Inna Morozov'}), (`69`:crew {crew_id:69, name:'Jackqueline WayneÊ'}), (`70`:crew {crew_id:70, name:'Jiao Tso-lin'}), (`71`:crew {crew_id:71, name:'Judith ODea'}), (`72`:crew {crew_id:72, name:'Judith Ridley'}), (`73`:crew {crew_id:73, name:'Karl Hardman'}), (`74`:crew {crew_id:74, name:'Karon Hardman'}), (`75`:crew {crew_id:75, name:'Keith WayneÊ'}), (`76`:crew {crew_id:76, name:'Keva Duggan'}), (`77`:crew {crew_id:77, name:'King Man'}), (`78`:crew {crew_id:78, name:'Kylie Eastman'}), (`79`:crew {crew_id:79, name:'Kyra Schon'}), (`80`:crew {crew_id:80, name:'Kyra Smirnov'}), (`81`:crew {crew_id:81, name:'Kyra Vinogradov'}), (`82`:crew {crew_id:82, name:'Lai Wu-ji'}), (`83`:crew {crew_id:83, name:'Lasandra Dew'}), (`84`:crew {crew_id:84, name:'Leong Kwan-yew'}), (`85`:crew {crew_id:85, name:'Lesia Ridley'}), (`86`:crew {crew_id:86, name:'Lotus Xiao-yong'}), (`87`:crew {crew_id:87, name:'Lu Ah-cy'}), (`88`:crew {crew_id:88, name:'Ludmilla Golyubev'}), (`89`:crew {crew_id:89, name:'Luo Chih-tui'}), (`90`:crew {crew_id:90, name:'Maha Ah-cy'}), (`91`:crew {crew_id:91, name:'Mahasin Sindhom'}), (`92`:crew {crew_id:92, name:'Mahasin Xing-li'}), (`93`:crew {crew_id:93, name:'Maria Zaytesev'}), (`94`:crew {crew_id:94, name:'Marilyn Eastman'}), (`95`:crew {crew_id:95, name:'Marina Golyubev'}), (`96`:crew {crew_id:96, name:'Marita Bittner'}), (`97`:crew {crew_id:97, name:'Michael Solovynov'}), (`98`:crew {crew_id:98, name:'Michael Vorobyrov'}), (`99`:crew {crew_id:99, name:'Michael Scott'}), (`100`:crew {crew_id:100, name:'Nabeela Iamam'})


//create the dormitory and department nodes

CREATE (`dorm1`:dormitory {dorm_id:1, name:'Salyut'}), (`dorm2`:dormitory {dorm_id:2, name:'Tiangong'}), (`dorm3`:dormitory {dorm_id:3, name:'Mir'}), (`dorm4`:dormitory {dorm_id:4, name:'Kosmos'}), (`dorm5`:dormitory {dorm_id:5, name:'Zvezda'}), (`dorm6`:dormitory {dorm_id:6, name:'Skylab'}), (`dorm7`:dormitory {dorm_id:7, name:'Genesis'}),
(`dept1`:department {dept_id:1, name:'Medical '}),(`dept2`:department {dept_id:2, name:'Mining'}), (`dept3`:department {dept_id:3, name:'Engineering'}),(`dept4`:department {dept_id:4, name:'Transportation'}), (`dept5`:department {dept_id:5, name:'Management'})


//create the crew-crew relationships
CREATE (`2`)-[:KNOWS]->(`48`), (`2`)-[:KNOWS]->(`6`), (`3`)-[:KNOWS]->(`7`), (`3`)-[:KNOWS]->(`5`), (`4`)-[:KNOWS]->(`93`), (`5`)-[:KNOWS]->(`3`), (`6`)-[:KNOWS]->(`2`), (`7`)-[:KNOWS]->(`3`), (`8`)-[:KNOWS]->(`79`), (`8`)-[:KNOWS]->(`4`), (`9`)-[:KNOWS]->(`47`), (`9`)-[:KNOWS]->(`3`), (`9`)-[:KNOWS]->(`5`), (`10`)-[:KNOWS]->(`2`), (`10`)-[:KNOWS]->(`4`), (`10`)-[:KNOWS]->(`6`), (`11`)-[:KNOWS]->(`27`), (`11`)-[:KNOWS]->(`1`), (`11`)-[:KNOWS]->(`3`), (`11`)-[:KNOWS]->(`5`), (`12`)-[:KNOWS]->(`4`), (`12`)-[:KNOWS]->(`6`), (`13`)-[:KNOWS]->(`53`), (`13`)-[:KNOWS]->(`1`), (`14`)-[:KNOWS]->(`30`), (`14`)-[:KNOWS]->(`4`), (`15`)-[:KNOWS]->(`32`), (`15`)-[:KNOWS]->(`66`), (`15`)-[:KNOWS]->(`81`), (`15`)-[:KNOWS]->(`3`), (`15`)-[:KNOWS]->(`5`), (`16`)-[:KNOWS]->(`31`), (`16`)-[:KNOWS]->(`4`), (`17`)-[:KNOWS]->(`37`), (`17`)-[:KNOWS]->(`68`), (`18`)-[:KNOWS]->(`42`), (`18`)-[:KNOWS]->(`2`), (`19`)-[:KNOWS]->(`3`), (`19`)-[:KNOWS]->(`5`), (`20`)-[:KNOWS]->(`84`), (`20`)-[:KNOWS]->(`2`), (`21`)-[:KNOWS]->(`1`), (`21`)-[:KNOWS]->(`3`), (`21`)-[:KNOWS]->(`5`), (`22`)-[:KNOWS]->(`40`), (`22`)-[:KNOWS]->(`86`), (`22`)-[:KNOWS]->(`2`), (`24`)-[:KNOWS]->(`97`), (`24`)-[:KNOWS]->(`4`), (`25`)-[:KNOWS]->(`3`), (`25`)-[:KNOWS]->(`5`), (`26`)-[:KNOWS]->(`98`), (`26`)-[:KNOWS]->(`2`), (`26`)-[:KNOWS]->(`4`), (`26`)-[:KNOWS]->(`6`), (`27`)-[:KNOWS]->(`11`), (`27`)-[:KNOWS]->(`1`), (`27`)-[:KNOWS]->(`3`), (`27`)-[:KNOWS]->(`5`), (`28`)-[:KNOWS]->(`4`), (`29`)-[:KNOWS]->(`59`), (`29`)-[:KNOWS]->(`1`), (`30`)-[:KNOWS]->(`14`), (`30`)-[:KNOWS]->(`4`), (`31`)-[:KNOWS]->(`16`), (`31`)-[:KNOWS]->(`3`), (`31`)-[:KNOWS]->(`5`), (`32`)-[:KNOWS]->(`15`), (`32`)-[:KNOWS]->(`66`), (`32`)-[:KNOWS]->(`81`), (`32`)-[:KNOWS]->(`4`), (`33`)-[:KNOWS]->(`61`), (`33`)-[:KNOWS]->(`3`), (`33`)-[:KNOWS]->(`5`), (`34`)-[:KNOWS]->(`58`), (`34`)-[:KNOWS]->(`4`), (`35`)-[:KNOWS]->(`77`), (`35`)-[:KNOWS]->(`1`), (`35`)-[:KNOWS]->(`3`), (`35`)-[:KNOWS]->(`5`), (`36`)-[:KNOWS]->(`89`), (`37`)-[:KNOWS]->(`17`), (`37`)-[:KNOWS]->(`68`), (`37`)-[:KNOWS]->(`3`), (`37`)-[:KNOWS]->(`5`), (`38`)-[:KNOWS]->(`46`), (`38`)-[:KNOWS]->(`4`), (`39`)-[:KNOWS]->(`76`), (`39`)-[:KNOWS]->(`3`), (`39`)-[:KNOWS]->(`5`), (`40`)-[:KNOWS]->(`22`), (`40`)-[:KNOWS]->(`86`), (`41`)-[:KNOWS]->(`3`), (`41`)-[:KNOWS]->(`5`), (`42`)-[:KNOWS]->(`18`), (`42`)-[:KNOWS]->(`6`), (`43`)-[:KNOWS]->(`50`), (`44`)-[:KNOWS]->(`4`), (`45`)-[:KNOWS]->(`3`), (`45`)-[:KNOWS]->(`5`), (`46`)-[:KNOWS]->(`38`), (`46`)-[:KNOWS]->(`4`), (`47`)-[:KNOWS]->(`9`), (`47`)-[:KNOWS]->(`3`), (`47`)-[:KNOWS]->(`5`), (`48`)-[:KNOWS]->(`2`), (`49`)-[:KNOWS]->(`100`), (`49`)-[:KNOWS]->(`1`), (`50`)-[:KNOWS]->(`43`), (`50`)-[:KNOWS]->(`2`), (`51`)-[:KNOWS]->(`64`), (`52`)-[:KNOWS]->(`4`), (`53`)-[:KNOWS]->(`13`), (`53`)-[:KNOWS]->(`3`), (`53`)-[:KNOWS]->(`5`), (`54`)-[:KNOWS]->(`2`), (`55`)-[:KNOWS]->(`92`), (`55`)-[:KNOWS]->(`1`), (`56`)-[:KNOWS]->(`2`), (`56`)-[:KNOWS]->(`6`), (`58`)-[:KNOWS]->(`34`), (`58`)-[:KNOWS]->(`4`), (`59`)-[:KNOWS]->(`29`), (`60`)-[:KNOWS]->(`6`), (`61`)-[:KNOWS]->(`33`), (`62`)-[:KNOWS]->(`71`), (`62`)-[:KNOWS]->(`6`), (`63`)-[:KNOWS]->(`72`), (`63`)-[:KNOWS]->(`85`), (`64`)-[:KNOWS]->(`51`), (`64`)-[:KNOWS]->(`2`), (`65`)-[:KNOWS]->(`3`), (`65`)-[:KNOWS]->(`5`), (`66`)-[:KNOWS]->(`15`), (`66`)-[:KNOWS]->(`32`), (`66`)-[:KNOWS]->(`81`), (`66`)-[:KNOWS]->(`4`), (`67`)-[:KNOWS]->(`80`), (`67`)-[:KNOWS]->(`3`), (`67`)-[:KNOWS]->(`5`), (`68`)-[:KNOWS]->(`17`), (`68`)-[:KNOWS]->(`37`), (`68`)-[:KNOWS]->(`4`), (`69`)-[:KNOWS]->(`75`), (`69`)-[:KNOWS]->(`1`), (`69`)-[:KNOWS]->(`3`), (`69`)-[:KNOWS]->(`5`), (`70`)-[:KNOWS]->(`2`), (`70`)-[:KNOWS]->(`4`), (`71`)-[:KNOWS]->(`62`), (`71`)-[:KNOWS]->(`1`), (`71`)-[:KNOWS]->(`3`), (`71`)-[:KNOWS]->(`5`), (`72`)-[:KNOWS]->(`63`), (`72`)-[:KNOWS]->(`85`), (`72`)-[:KNOWS]->(`4`), (`73`)-[:KNOWS]->(`74`), (`73`)-[:KNOWS]->(`3`), (`73`)-[:KNOWS]->(`5`), (`74`)-[:KNOWS]->(`73`), (`74`)-[:KNOWS]->(`4`), (`75`)-[:KNOWS]->(`69`), (`75`)-[:KNOWS]->(`1`), (`75`)-[:KNOWS]->(`3`), (`75`)-[:KNOWS]->(`5`), (`76`)-[:KNOWS]->(`39`), (`76`)-[:KNOWS]->(`4`), (`77`)-[:KNOWS]->(`35`), (`77`)-[:KNOWS]->(`3`), (`77`)-[:KNOWS]->(`5`), (`78`)-[:KNOWS]->(`94`), (`78`)-[:KNOWS]->(`4`), (`79`)-[:KNOWS]->(`8`), (`79`)-[:KNOWS]->(`1`), (`79`)-[:KNOWS]->(`3`), (`79`)-[:KNOWS]->(`5`), (`80`)-[:KNOWS]->(`67`), (`80`)-[:KNOWS]->(`2`), (`80`)-[:KNOWS]->(`4`), (`80`)-[:KNOWS]->(`6`), (`81`)-[:KNOWS]->(`15`), (`81`)-[:KNOWS]->(`32`), (`81`)-[:KNOWS]->(`66`), (`81`)-[:KNOWS]->(`1`), (`81`)-[:KNOWS]->(`3`), (`81`)-[:KNOWS]->(`5`), (`82`)-[:KNOWS]->(`2`), (`83`)-[:KNOWS]->(`3`), (`83`)-[:KNOWS]->(`5`), (`84`)-[:KNOWS]->(`20`), (`85`)-[:KNOWS]->(`63`), (`85`)-[:KNOWS]->(`72`), (`85`)-[:KNOWS]->(`3`), (`85`)-[:KNOWS]->(`5`), (`86`)-[:KNOWS]->(`22`), (`86`)-[:KNOWS]->(`40`), (`86`)-[:KNOWS]->(`2`), (`86`)-[:KNOWS]->(`4`), (`87`)-[:KNOWS]->(`90`), (`87`)-[:KNOWS]->(`1`), (`87`)-[:KNOWS]->(`3`), (`87`)-[:KNOWS]->(`5`), (`88`)-[:KNOWS]->(`95`), (`88`)-[:KNOWS]->(`4`), (`89`)-[:KNOWS]->(`36`), (`89`)-[:KNOWS]->(`1`), (`89`)-[:KNOWS]->(`3`), (`89`)-[:KNOWS]->(`5`), (`90`)-[:KNOWS]->(`87`), (`92`)-[:KNOWS]->(`55`), (`92`)-[:KNOWS]->(`4`), (`92`)-[:KNOWS]->(`6`), (`93`)-[:KNOWS]->(`4`), (`93`)-[:KNOWS]->(`3`), (`93`)-[:KNOWS]->(`5`), (`94`)-[:KNOWS]->(`78`), (`94`)-[:KNOWS]->(`4`), (`95`)-[:KNOWS]->(`88`), (`95`)-[:KNOWS]->(`3`), (`95`)-[:KNOWS]->(`5`), (`96`)-[:KNOWS]->(`4`), (`97`)-[:KNOWS]->(`24`), (`97`)-[:KNOWS]->(`3`), (`97`)-[:KNOWS]->(`5`), (`98`)-[:KNOWS]->(`26`), (`98`)-[:KNOWS]->(`4`), (`100`)-[:KNOWS]->(`49`)


//create the crew-dormitory relationships

CREATE (`3`)-[:LIVES_IN]->(`dorm1`), (`4`)-[:LIVES_IN]->(`dorm1`), (`5`)-[:LIVES_IN]->(`dorm1`), (`9`)-[:LIVES_IN]->(`dorm1`), (`12`)-[:LIVES_IN]->(`dorm1`), (`15`)-[:LIVES_IN]->(`dorm1`), (`30`)-[:LIVES_IN]->(`dorm1`), (`31`)-[:LIVES_IN]->(`dorm1`), (`35`)-[:LIVES_IN]->(`dorm1`), (`39`)-[:LIVES_IN]->(`dorm1`), (`47`)-[:LIVES_IN]->(`dorm1`), (`53`)-[:LIVES_IN]->(`dorm1`), (`70`)-[:LIVES_IN]->(`dorm1`), (`76`)-[:LIVES_IN]->(`dorm1`), (`77`)-[:LIVES_IN]->(`dorm1`), (`86`)-[:LIVES_IN]->(`dorm1`), (`87`)-[:LIVES_IN]->(`dorm1`), (`89`)-[:LIVES_IN]->(`dorm1`), (`92`)-[:LIVES_IN]->(`dorm1`), (`93`)-[:LIVES_IN]->(`dorm1`), (`97`)-[:LIVES_IN]->(`dorm1`), (`2`)-[:LIVES_IN]->(`dorm2`), (`6`)-[:LIVES_IN]->(`dorm2`), (`10`)-[:LIVES_IN]->(`dorm2`), (`13`)-[:LIVES_IN]->(`dorm2`), (`26`)-[:LIVES_IN]->(`dorm2`), (`56`)-[:LIVES_IN]->(`dorm2`), (`63`)-[:LIVES_IN]->(`dorm2`), (`80`)-[:LIVES_IN]->(`dorm2`), (`83`)-[:LIVES_IN]->(`dorm2`), (`36`)-[:LIVES_IN]->(`dorm3`), (`40`)-[:LIVES_IN]->(`dorm3`), (`48`)-[:LIVES_IN]->(`dorm3`), (`51`)-[:LIVES_IN]->(`dorm3`), (`90`)-[:LIVES_IN]->(`dorm3`), (`91`)-[:LIVES_IN]->(`dorm3`), (`100`)-[:LIVES_IN]->(`dorm3`), (`25`)-[:LIVES_IN]->(`dorm4`), (`28`)-[:LIVES_IN]->(`dorm4`), (`29`)-[:LIVES_IN]->(`dorm4`), (`32`)-[:LIVES_IN]->(`dorm4`), (`33`)-[:LIVES_IN]->(`dorm4`), (`34`)-[:LIVES_IN]->(`dorm4`), (`58`)-[:LIVES_IN]->(`dorm4`), (`61`)-[:LIVES_IN]->(`dorm4`), (`78`)-[:LIVES_IN]->(`dorm4`), (`82`)-[:LIVES_IN]->(`dorm4`), (`88`)-[:LIVES_IN]->(`dorm4`), (`94`)-[:LIVES_IN]->(`dorm4`), (`95`)-[:LIVES_IN]->(`dorm4`), (`96`)-[:LIVES_IN]->(`dorm4`), (`99`)-[:LIVES_IN]->(`dorm4`), (`1`)-[:LIVES_IN]->(`dorm5`), (`8`)-[:LIVES_IN]->(`dorm5`), (`11`)-[:LIVES_IN]->(`dorm5`), (`16`)-[:LIVES_IN]->(`dorm5`), (`18`)-[:LIVES_IN]->(`dorm5`), (`20`)-[:LIVES_IN]->(`dorm5`), (`21`)-[:LIVES_IN]->(`dorm5`), (`27`)-[:LIVES_IN]->(`dorm5`), (`38`)-[:LIVES_IN]->(`dorm5`), (`42`)-[:LIVES_IN]->(`dorm5`), (`46`)-[:LIVES_IN]->(`dorm5`), (`52`)-[:LIVES_IN]->(`dorm5`), (`54`)-[:LIVES_IN]->(`dorm5`), (`60`)-[:LIVES_IN]->(`dorm5`), (`62`)-[:LIVES_IN]->(`dorm5`), (`69`)-[:LIVES_IN]->(`dorm5`), (`71`)-[:LIVES_IN]->(`dorm5`), (`75`)-[:LIVES_IN]->(`dorm5`), (`79`)-[:LIVES_IN]->(`dorm5`), (`81`)-[:LIVES_IN]->(`dorm5`), (`84`)-[:LIVES_IN]->(`dorm5`), (`7`)-[:LIVES_IN]->(`dorm6`), (`14`)-[:LIVES_IN]->(`dorm6`), (`17`)-[:LIVES_IN]->(`dorm6`), (`19`)-[:LIVES_IN]->(`dorm6`), (`22`)-[:LIVES_IN]->(`dorm6`), (`23`)-[:LIVES_IN]->(`dorm6`), (`24`)-[:LIVES_IN]->(`dorm6`), (`37`)-[:LIVES_IN]->(`dorm6`), (`41`)-[:LIVES_IN]->(`dorm6`), (`43`)-[:LIVES_IN]->(`dorm6`), (`44`)-[:LIVES_IN]->(`dorm6`), (`45`)-[:LIVES_IN]->(`dorm6`), (`49`)-[:LIVES_IN]->(`dorm6`), (`50`)-[:LIVES_IN]->(`dorm6`), (`55`)-[:LIVES_IN]->(`dorm6`), (`57`)-[:LIVES_IN]->(`dorm6`), (`59`)-[:LIVES_IN]->(`dorm6`), (`64`)-[:LIVES_IN]->(`dorm6`), (`65`)-[:LIVES_IN]->(`dorm6`), (`66`)-[:LIVES_IN]->(`dorm6`), (`67`)-[:LIVES_IN]->(`dorm6`), (`68`)-[:LIVES_IN]->(`dorm6`), (`72`)-[:LIVES_IN]->(`dorm6`), (`73`)-[:LIVES_IN]->(`dorm6`), (`74`)-[:LIVES_IN]->(`dorm6`), (`85`)-[:LIVES_IN]->(`dorm6`), (`98`)-[:LIVES_IN]->(`dorm6`)


//create the crew-department relationships

CREATE (`7`)-[:WORKS_IN]->(`dept1`), (`17`)-[:WORKS_IN]->(`dept1`), (`23`)-[:WORKS_IN]->(`dept1`), (`43`)-[:WORKS_IN]->(`dept1`), (`53`)-[:WORKS_IN]->(`dept1`), (`57`)-[:WORKS_IN]->(`dept1`), (`77`)-[:WORKS_IN]->(`dept1`), (`84`)-[:WORKS_IN]->(`dept1`), (`3`)-[:WORKS_IN]->(`dept2`), (`4`)-[:WORKS_IN]->(`dept2`), (`5`)-[:WORKS_IN]->(`dept2`), (`8`)-[:WORKS_IN]->(`dept2`), (`9`)-[:WORKS_IN]->(`dept2`), (`10`)-[:WORKS_IN]->(`dept2`), (`11`)-[:WORKS_IN]->(`dept2`), (`14`)-[:WORKS_IN]->(`dept2`), (`15`)-[:WORKS_IN]->(`dept2`), (`16`)-[:WORKS_IN]->(`dept2`), (`19`)-[:WORKS_IN]->(`dept2`), (`21`)-[:WORKS_IN]->(`dept2`), (`24`)-[:WORKS_IN]->(`dept2`), (`25`)-[:WORKS_IN]->(`dept2`), (`26`)-[:WORKS_IN]->(`dept2`), (`27`)-[:WORKS_IN]->(`dept2`), (`28`)-[:WORKS_IN]->(`dept2`), (`30`)-[:WORKS_IN]->(`dept2`), (`31`)-[:WORKS_IN]->(`dept2`), (`32`)-[:WORKS_IN]->(`dept2`), (`33`)-[:WORKS_IN]->(`dept2`), (`34`)-[:WORKS_IN]->(`dept2`), (`37`)-[:WORKS_IN]->(`dept2`), (`38`)-[:WORKS_IN]->(`dept2`), (`39`)-[:WORKS_IN]->(`dept2`), (`41`)-[:WORKS_IN]->(`dept2`), (`44`)-[:WORKS_IN]->(`dept2`), (`45`)-[:WORKS_IN]->(`dept2`), (`46`)-[:WORKS_IN]->(`dept2`), (`47`)-[:WORKS_IN]->(`dept2`), (`52`)-[:WORKS_IN]->(`dept2`), (`58`)-[:WORKS_IN]->(`dept2`), (`65`)-[:WORKS_IN]->(`dept2`), (`66`)-[:WORKS_IN]->(`dept2`), (`67`)-[:WORKS_IN]->(`dept2`), (`68`)-[:WORKS_IN]->(`dept2`), (`69`)-[:WORKS_IN]->(`dept2`), (`71`)-[:WORKS_IN]->(`dept2`), (`72`)-[:WORKS_IN]->(`dept2`), (`73`)-[:WORKS_IN]->(`dept2`), (`74`)-[:WORKS_IN]->(`dept2`), (`75`)-[:WORKS_IN]->(`dept2`), (`76`)-[:WORKS_IN]->(`dept2`), (`78`)-[:WORKS_IN]->(`dept2`), (`79`)-[:WORKS_IN]->(`dept2`), (`80`)-[:WORKS_IN]->(`dept2`), (`81`)-[:WORKS_IN]->(`dept2`), (`83`)-[:WORKS_IN]->(`dept2`), (`85`)-[:WORKS_IN]->(`dept2`), (`88`)-[:WORKS_IN]->(`dept2`), (`93`)-[:WORKS_IN]->(`dept2`), (`94`)-[:WORKS_IN]->(`dept2`), (`95`)-[:WORKS_IN]->(`dept2`), (`96`)-[:WORKS_IN]->(`dept2`), (`97`)-[:WORKS_IN]->(`dept2`), (`98`)-[:WORKS_IN]->(`dept2`), (`1`)-[:WORKS_IN]->(`dept3`), (`2`)-[:WORKS_IN]->(`dept3`), (`13`)-[:WORKS_IN]->(`dept3`), (`18`)-[:WORKS_IN]->(`dept3`), (`20`)-[:WORKS_IN]->(`dept3`), (`22`)-[:WORKS_IN]->(`dept3`), (`29`)-[:WORKS_IN]->(`dept3`), (`35`)-[:WORKS_IN]->(`dept3`), (`49`)-[:WORKS_IN]->(`dept3`), (`50`)-[:WORKS_IN]->(`dept3`), (`54`)-[:WORKS_IN]->(`dept3`), (`55`)-[:WORKS_IN]->(`dept3`), (`56`)-[:WORKS_IN]->(`dept3`), (`64`)-[:WORKS_IN]->(`dept3`), (`70`)-[:WORKS_IN]->(`dept3`), (`82`)-[:WORKS_IN]->(`dept3`), (`86`)-[:WORKS_IN]->(`dept3`), (`87`)-[:WORKS_IN]->(`dept3`), (`89`)-[:WORKS_IN]->(`dept3`), (`36`)-[:WORKS_IN]->(`dept4`), (`40`)-[:WORKS_IN]->(`dept4`), (`48`)-[:WORKS_IN]->(`dept4`), (`51`)-[:WORKS_IN]->(`dept4`), (`90`)-[:WORKS_IN]->(`dept4`), (`91`)-[:WORKS_IN]->(`dept4`), (`100`)-[:WORKS_IN]->(`dept4`), (`6`)-[:WORKS_IN]->(`dept5`), (`12`)-[:WORKS_IN]->(`dept5`), (`42`)-[:WORKS_IN]->(`dept5`), (`59`)-[:WORKS_IN]->(`dept5`), (`60`)-[:WORKS_IN]->(`dept5`), (`61`)-[:WORKS_IN]->(`dept5`), (`62`)-[:WORKS_IN]->(`dept5`), (`63`)-[:WORKS_IN]->(`dept5`), (`92`)-[:WORKS_IN]->(`dept5`), (`99`)-[:WORKS_IN]->(`dept5`)
----

- Briefly go over the cypher for people are interested in learning cypher
- The full toy graph will have network information spread across > 30 systems, with daily changes to network infrastructure
-- Will demonstrate that the graph can hold the up-to-date topology for the entire network

== Solving the Problems

=== Uncovering the Need for Additional Redundancy

==== Finding and dealing with bridges
- Define bridge, connected components
- Demonstrate how easy it is to find network bridges using cyper
- Change some nodes/connections, demo that it still works
- Segue into the importance of redundancy in networks, and in the toy network add some connections.
-- Maybe connections are expensive - how can we add the least amount of connections as possible to avoid bridges? Just mention this and don’t get stuck in the weeds of graph theory

=== Resilience During Unplanned Network Outages

==== Introduction

OK, so we’ve got redundancy, more or less. But we still need rapid, automated “what if ” analysis to ensure resilience during unplanned network outages"
- introduce planning for subgraph-fault tolerant routing as very simple problem in small toy networks, but a much gnarlier one in larger complex networks.
- it might be too slow (both in cypher and for this write-up) to go through and eliminate link by link in the subgraph, but in a small subgraph example it’s doable, so use a small example
-- the 5-node subraph in the next image is a good example
- Conclude with a nice re-routing plan for the network and point out some weaknesses uncovered by this method

==== Sub-graph Fault Tolerant Routing

_Subgraph Fault-Tolerant Routing (SFTR)_ is a strategy for planning for the inevitable - resource or connection outage. Sometimes a squirrel builds a nest in part of your network. Although we have to accept that parts of our networks will break, we can also determine which components will be able to reroute and which will have the potential to be catastrophic failures.

L+1 sub-graph routing is a strategy for routing dependable connections in optical networks. In this approach each network is mapped into L distinct sub-graphs resulting from the removal of links (in this example, only one link) from the original network.

A connection from node A to B in this scheme becomes “accepted”–in other words, identified as not potentially catastrophic–only if it is there is a path from A to B in all sub-graphs. Ideally, we would design a network in which there is always a path from A to B given any network failure.

Lets look at the example in the network described above.

== Conclusion/Discussion

=== Why Neo4j?

The problem of modeling a live Telco network was a good fit for Neo4j’s solution, which uses nodes and relationships to describe assets on the network (switches, routers, cell towers), and the links between them (trunks, fiber optic cables, VPNs). Neo4j places no restrictions on the way the data is structured, or the data that is captured: it can model and represent the new network in a natural way. This extreme flexibility saves a great deal of time, and makes it possible to represent complex data and abstract concepts at the same time, within the same database. This is extremely powerful.

=== Additional things telcos need to worry about that neo4j could help solve

== Actual Use Case: Vivendi SFR

- Second largest communications company in France
- Part of Vivendi Group, partnering with Vodafone

SFR tasked a 10-person project team to find a network management solution, and brought in software consultants from London-based OpenCredo to provide best practice expertise. The team selected the Neo4j graph database to build a proof of concept app that could pinpoint any “single point of failure” across the components of the SFR multi-system network.

== Cypher Appendix

Briefly go over the queries in more detail

=== Setting up the Graph

=== Uncovering the Need for Additional Redundancy

==== Finding Bridges

==== Adding Bridges

=== Resilience During Unplanned Network Outages

==== Removing Links

==== Finding (the best) secondary routes for emergencies

== References

- those two Frederick et al papers
- Neo4j ‘intro slides’ and graph connect presentations
- Neo4j telco white paper
- 'http://en.wikipedia.org/wiki/Samuel_Johnson[Networks, Crowds, and Markets]'
- 'http://jexp.de/blog/2014/03/sampling-a-neo4j-database/[Sampling a Neo4j Database]'
